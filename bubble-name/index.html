<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="robots" content="index, follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bubble Name | Coco the Axolotl</title>
  <meta name="description" content="Type your name in bubble letters and download it to color. Free kids activity (ages 5â€“7).">

  <link rel="icon" type="image/x-icon" href="/favicon.ico?v=2">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap" rel="stylesheet">

  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#fef6fb;margin:0;color:#333;text-align:center}
    header{background:#f7c1cc;padding:22px 16px}
    h1{margin:0;font-size:2.1em;font-family:"Fredoka One",system-ui}
    main{max-width:980px;margin:0 auto;padding:18px 16px 40px}
    p{max-width:720px;margin:10px auto;line-height:1.4}
    .row{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin:14px 0}
    input{
      padding:14px 16px;border-radius:14px;border:2px solid #ffd1e3;
      font-size:1.05em;width:min(420px, 92vw);outline:none
    }
    button,a.btn{
      padding:14px 18px;border-radius:16px;border:none;cursor:pointer;
      font-weight:800;font-size:1.02em;text-decoration:none;display:inline-block
    }
    button{background:#ff69b4;color:#fff}
    .secondary{background:#fff;color:#ff69b4;border:2px solid #ff69b4}
    .card{
      background:#fff;border-radius:18px;box-shadow:0 8px 20px rgba(0,0,0,.06);
      padding:12px;margin:14px auto;display:inline-block
    }
    canvas{background:#fff;border-radius:18px;max-width:96vw;height:auto}
    .small{opacity:.85;font-size:.95em}
    .lang-toggle{display:flex;gap:6px;justify-content:center;margin-top:10px}
    .lang-btn{padding:6px 14px;border-radius:10px;border:2px solid #ff69b4;background:#fff;color:#ff69b4;font-weight:800;cursor:pointer;font-size:.95em}
    .lang-btn.active{background:#ff69b4;color:#fff}
    span[data-lang="fr"]{display:none}
    span[data-lang="es"]{display:none}
    [data-lang="fr"]{display:none}
    [data-lang="es"]{display:none}
    body.fr span[data-lang="fr"]{display:inline}
    body.fr span[data-lang="en"],body.fr span[data-lang="es"]{display:none}
    body.fr [data-lang="fr"]{display:block}
    body.fr [data-lang="en"],body.fr [data-lang="es"]{display:none}
    body.es span[data-lang="es"]{display:inline}
    body.es span[data-lang="en"],body.es span[data-lang="fr"]{display:none}
    body.es [data-lang="es"]{display:block}
    body.es [data-lang="en"],body.es [data-lang="fr"]{display:none}
    .lang-toggle{display:flex !important}
  </style>
</head>

<body>
<header>
  <h1><span data-lang="en">ðŸ”¤ Bubble Name</span><span data-lang="fr">ðŸ”¤ Nom en Bulles</span><span data-lang="es">ðŸ”¤ Nombre en Burbujas</span></h1>
  <div class="lang-toggle">
    <button class="lang-btn active" onclick="setLang('en')">EN</button>
    <button class="lang-btn" onclick="setLang('fr')">FR</button>
    <button class="lang-btn" onclick="setLang('es')">ES</button>
  </div>
</header>

<main>
  <p><span data-lang="en"><strong>Kids:</strong> type your name to get <strong>big bubble letters</strong> you can <strong>download and color</strong> (ages 5&ndash;7).</span><span data-lang="fr"><strong>Enfants :</strong> tapez votre nom pour obtenir de <strong>grandes lettres bulles</strong> &agrave; <strong>t&eacute;l&eacute;charger et colorier</strong> (5&ndash;7 ans).</span><span data-lang="es"><strong>Ni&ntilde;os:</strong> escribe tu nombre para obtener <strong>grandes letras burbuja</strong> que puedes <strong>descargar y colorear</strong> (5&ndash;7 a&ntilde;os).</span></p>

  <div class="row">
    <input id="nameInput" maxlength="18" placeholder="LUCAS" aria-label="Enter your name">
    <button id="genBtn"><span data-lang="en">Make my name</span><span data-lang="fr">Cr&eacute;er mon nom</span><span data-lang="es">Crear mi nombre</span></button>
  </div>

  <div class="card">
    <canvas id="c" width="2480" height="3508" aria-label="Printable bubble name"></canvas>
  </div>

  <div class="row">
    <button class="secondary" id="dlBtn"><span data-lang="en">Download (A4 PNG)</span><span data-lang="fr">T&eacute;l&eacute;charger (A4 PNG)</span><span data-lang="es">Descargar (A4 PNG)</span></button>
    <button id="printBtn"><span data-lang="en">Print</span><span data-lang="fr">Imprimer</span><span data-lang="es">Imprimir</span></button>
    <a class="btn secondary" href="/" style="border:2px solid #ff69b4;color:#ff69b4;background:#fff"><span data-lang="en">Home</span><span data-lang="fr">Accueil</span><span data-lang="es">Inicio</span></a>
  </div>

  <p class="small"><span data-lang="en">Tip: download then print. Color inside the letters âœ¨</span><span data-lang="fr">Astuce : t&eacute;l&eacute;chargez puis imprimez. Coloriez l'int&eacute;rieur des lettres âœ¨</span><span data-lang="es">Consejo: descarga y luego imprime. Colorea dentro de las letras âœ¨</span></p>
</main>

<script>
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  function sanitizeName(s){
    return (s || "")
      .trim()
      .toUpperCase()
      .replace(/[^A-ZÃ€Ã‚Ã„Ã‡Ã‰ÃˆÃŠÃ‹ÃŽÃÃ”Ã–Ã™Ã›ÃœÅ¸' -]/g, "")
      .slice(0, 18);
  }

  function measure(text, size){
    ctx.font = `900 ${size}px "Fredoka One", Arial Black, Arial`;
    return ctx.measureText(text).width;
  }

  function fitSize(text, maxWidth){
    let size = 260;
    while(size > 80){
      if(measure(text, size) <= maxWidth) return size;
      size -= 8;
    }
    return 80;
  }

  function draw(name){
    const W = canvas.width, H = canvas.height;

    // White A4 background (2480x3508 = A4 at ~300dpi)
    ctx.clearRect(0,0,W,H);
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0,0,W,H);

    // Title
    ctx.textAlign = "center";
    ctx.fillStyle = "#111";
    ctx.font = `900 110px "Fredoka One", Arial`;
    ctx.fillText("Color your name!", W/2, 280);

    // Bubble letters (center)
    const maxNameWidth = W * 0.82;
    const fontSize = fitSize(name, maxNameWidth);
    const y = Math.round(H * 0.52);

    ctx.textAlign = "center";
    ctx.lineJoin = "round";
    ctx.lineCap = "round";
    ctx.miterLimit = 1;

    ctx.font = `900 ${fontSize}px "Fredoka One", Arial Black, Arial`;

    // Main outline (FINER than before)
    ctx.lineWidth = Math.max(24, Math.round(fontSize * 0.11));
    ctx.strokeStyle = "#000";
    ctx.strokeText(name, W/2, y);

    // White fill for coloring inside
    ctx.fillStyle = "#fff";
    ctx.fillText(name, W/2, y);

    // Light second outline (clean edge)
    ctx.lineWidth = Math.max(6, Math.round(fontSize * 0.025));
    ctx.strokeStyle = "#000";
    ctx.strokeText(name, W/2, y);

    // Footer URL
    ctx.font = `900 80px "Fredoka One", Arial`;
    ctx.fillStyle = "#111";
    ctx.fillText("cocotheaxolotl.org", W/2, H - 220);
  }

  function generate(){
    const raw = document.getElementById("nameInput").value;
    const name = sanitizeName(raw) || "COCO";
    draw(name);
  }

  document.getElementById("genBtn").addEventListener("click", generate);
  document.getElementById("nameInput").addEventListener("keydown", (e)=>{ if(e.key==="Enter") generate(); });

  document.getElementById("dlBtn").addEventListener("click", ()=>{
    const raw = document.getElementById("nameInput").value;
    const name = sanitizeName(raw) || "COCO";
    const a = document.createElement("a");
    a.download = `coco-bubble-name-${name}.png`;
    a.href = canvas.toDataURL("image/png");
    a.click();
  });

  document.getElementById("printBtn").addEventListener("click", ()=>{
    const dataUrl = canvas.toDataURL("image/png");
    const w = window.open("");
    w.document.write(`<img src="${dataUrl}" style="width:100%;max-width:900px;display:block;margin:0 auto;">`);
    w.document.close();
    w.focus();
    w.print();
  });

  // Start
  draw("COCO");
</script>
<script>
function setLang(lang){document.body.className=lang==='fr'?'fr':lang==='es'?'es':'';document.querySelectorAll('.lang-btn').forEach(function(b){b.classList.toggle('active',b.textContent===lang.toUpperCase())});document.documentElement.lang=lang}
</script>
</body>
</html>
